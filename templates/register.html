{% extends "base.html" %}
{% block title %}Register as Donor | PlasmoBlood Sync{% endblock %}

{% block content %}
<div class="min-h-[85vh] flex flex-col items-center justify-center px-4 py-12">

  <!-- Enhanced Hero Section -->
  <div class="w-full max-w-2xl mb-8 text-center animate-slide-up">
    <div class="inline-block mb-4">
      <div class="w-20 h-20 bg-gradient-to-br from-rose-500 to-pink-600 rounded-3xl flex items-center justify-center shadow-2xl float-animation">
        <i data-lucide="heart-handshake" class="w-10 h-10 text-white"></i>
      </div>
    </div>
    <h1 class="text-4xl md:text-5xl font-black mb-4 gradient-text">Become a Lifesaver</h1>
    <p class="text-gray-600 dark:text-gray-400 text-lg max-w-xl mx-auto leading-relaxed">
      Join our community of heroes and help save lives through blood and plasma donation.
    </p>
  </div>

  <!-- Registration Form Card -->
  <div class="w-full max-w-2xl animate-slide-up" style="animation-delay: 0.1s;">
    <div class="relative overflow-hidden rounded-3xl bg-white dark:bg-slate-900 shadow-2xl border border-gray-200 dark:border-slate-800">
      <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-rose-500 via-pink-500 to-purple-500"></div>
      
      <div class="p-8 md:p-10">
        <!-- Header -->
        <div class="flex items-center gap-3 mb-8">
          <div class="w-10 h-10 bg-gradient-to-br from-rose-100 to-pink-100 dark:from-rose-900/30 dark:to-pink-900/30 rounded-xl flex items-center justify-center">
            <i data-lucide="clipboard-list" class="w-5 h-5 text-rose-600 dark:text-rose-400"></i>
          </div>
          <h2 class="text-2xl md:text-3xl font-black text-gray-900 dark:text-white">Registration Form</h2>
        </div>

        <!-- Flash Messages -->
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            <div class="mb-8 space-y-3">
              {% for category, message in messages %}
                <div
                  x-data="{ show: true }"
                  x-init="setTimeout(() => show = false, 5000)"
                  x-show="show"
                  x-transition:enter="transition ease-out duration-300"
                  x-transition:enter-start="opacity-0 transform translate-y-2"
                  x-transition:enter-end="opacity-100 transform translate-y-0"
                  x-transition:leave="transition ease-in duration-200"
                  x-transition:leave-start="opacity-100"
                  x-transition:leave-end="opacity-0"
                  class="flex items-center gap-3 px-5 py-4 rounded-2xl text-sm font-semibold shadow-lg
                    {% if category == 'success' %}bg-gradient-to-r from-green-50 to-emerald-50 text-green-800 border border-green-200 dark:from-green-900/20 dark:to-emerald-900/20 dark:text-green-400 dark:border-green-800
                    {% elif category == 'error' %}bg-gradient-to-r from-red-50 to-rose-50 text-red-800 border border-red-200 dark:from-red-900/20 dark:to-rose-900/20 dark:text-red-400 dark:border-red-800
                    {% else %}bg-gradient-to-r from-gray-50 to-slate-50 text-gray-800 border border-gray-200 dark:from-gray-800 dark:to-slate-800 dark:text-gray-300 dark:border-gray-700{% endif %}">
                  {% if category == 'success' %}
                    <i data-lucide="check-circle-2" class="w-5 h-5 flex-shrink-0"></i>
                  {% elif category == 'error' %}
                    <i data-lucide="alert-circle" class="w-5 h-5 flex-shrink-0"></i>
                  {% else %}
                    <i data-lucide="info" class="w-5 h-5 flex-shrink-0"></i>
                  {% endif %}
                  <span>{{ message }}</span>
                </div>
              {% endfor %}
            </div>
          {% endif %}
        {% endwith %}

        <!-- Registration Form -->
        <form method="POST" action="/register" class="space-y-6">
          <!-- Full Name -->
          <div class="group">
            <label for="name" class="flex items-center gap-2 text-sm font-bold mb-3 text-gray-700 dark:text-gray-300">
              <i data-lucide="user" class="w-4 h-4 text-rose-600 dark:text-rose-400"></i>
              Full Name
            </label>
            <input type="text" id="name" name="name" required
                   placeholder="Enter your full name"
                   class="w-full px-5 py-4 rounded-xl bg-gray-50 dark:bg-slate-800 text-gray-900 dark:text-white border-2 border-gray-200 dark:border-slate-700 focus:border-rose-500 dark:focus:border-rose-500 focus:ring-4 focus:ring-rose-500/10 outline-none transition-all placeholder:text-gray-400" />
          </div>

          <!-- Email -->
          <div class="group">
            <label for="email" class="flex items-center gap-2 text-sm font-bold mb-3 text-gray-700 dark:text-gray-300">
              <i data-lucide="mail" class="w-4 h-4 text-rose-600 dark:text-rose-400"></i>
              Email Address
            </label>
            <input type="email" id="email" name="email" required
                   placeholder="your.email@example.com"
                   class="w-full px-5 py-4 rounded-xl bg-gray-50 dark:bg-slate-800 text-gray-900 dark:text-white border-2 border-gray-200 dark:border-slate-700 focus:border-rose-500 dark:focus:border-rose-500 focus:ring-4 focus:ring-rose-500/10 outline-none transition-all placeholder:text-gray-400" />
          </div>

          <!-- Phone -->
          <div class="group">
            <label for="phone" class="flex items-center gap-2 text-sm font-bold mb-3 text-gray-700 dark:text-gray-300">
              <i data-lucide="phone" class="w-4 h-4 text-rose-600 dark:text-rose-400"></i>
              Phone Number
            </label>
            <input type="tel" id="phone" name="phone" required
                   placeholder="+91 98765 43210"
                   pattern="[0-9+\s-]+"
                   class="w-full px-5 py-4 rounded-xl bg-gray-50 dark:bg-slate-800 text-gray-900 dark:text-white border-2 border-gray-200 dark:border-slate-700 focus:border-rose-500 dark:focus:border-rose-500 focus:ring-4 focus:ring-rose-500/10 outline-none transition-all placeholder:text-gray-400" />
          </div>

          <!-- Blood Group -->
          <div class="group">
            <label for="blood_group" class="flex items-center gap-2 text-sm font-bold mb-3 text-gray-700 dark:text-gray-300">
              <i data-lucide="droplet" class="w-4 h-4 text-rose-600 dark:text-rose-400"></i>
              Blood Group
            </label>
            <div class="relative">
              <select id="blood_group" name="blood_group" required
                      class="w-full px-5 py-4 rounded-xl bg-gray-50 dark:bg-slate-800 text-gray-900 dark:text-white border-2 border-gray-200 dark:border-slate-700 focus:border-rose-500 dark:focus:border-rose-500 focus:ring-4 focus:ring-rose-500/10 outline-none transition-all appearance-none cursor-pointer">
                <option value="" disabled selected>Select your blood group</option>
                <option value="A+">A+ (A Positive)</option>
                <option value="A-">A- (A Negative)</option>
                <option value="B+">B+ (B Positive)</option>
                <option value="B-">B- (B Negative)</option>
                <option value="O+">O+ (O Positive)</option>
                <option value="O-">O- (O Negative)</option>
                <option value="AB+">AB+ (AB Positive)</option>
                <option value="AB-">AB- (AB Negative)</option>
              </select>
              <i data-lucide="chevron-down" class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"></i>
            </div>
          </div>

          <!-- Last Donation Date -->
          <div class="group">
            <label for="last_donation" class="flex items-center gap-2 text-sm font-bold mb-3 text-gray-700 dark:text-gray-300">
              <i data-lucide="calendar-clock" class="w-4 h-4 text-rose-600 dark:text-rose-400"></i>
              Last Donation Date
            </label>
            <input type="date" id="last_donation" name="last_donation" required
                   class="w-full px-5 py-4 rounded-xl bg-gray-50 dark:bg-slate-800 text-gray-900 dark:text-white border-2 border-gray-200 dark:border-slate-700 focus:border-rose-500 dark:focus:border-rose-500 focus:ring-4 focus:ring-rose-500/10 outline-none transition-all" />
            <p class="mt-2 text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1">
              <i data-lucide="info" class="w-3 h-3"></i>
              Enter the date of your last blood/plasma donation
            </p>
          </div>

          <!-- Terms & Conditions -->
          <div class="flex items-start gap-3 p-4 bg-gray-50 dark:bg-slate-800 rounded-xl border border-gray-200 dark:border-slate-700">
            <input type="checkbox" id="terms" required
                   class="mt-1 w-5 h-5 rounded border-gray-300 dark:border-slate-600 text-rose-600 focus:ring-rose-500 focus:ring-2 cursor-pointer" />
            <label for="terms" class="text-sm text-gray-600 dark:text-gray-400 cursor-pointer">
              I agree to the <a href="#" class="text-rose-600 dark:text-rose-400 font-semibold hover:underline">terms and conditions</a> and confirm that all information provided is accurate.
            </label>
          </div>

          <!-- Submit Button -->
          <div class="pt-4">
            <button type="submit"
                    class="w-full group relative overflow-hidden bg-gradient-to-r from-rose-600 via-pink-600 to-rose-600 hover:from-rose-700 hover:via-pink-700 hover:to-rose-700 text-white px-8 py-5 rounded-2xl font-black text-lg transition-all shadow-2xl shadow-rose-500/30 hover:shadow-rose-500/50 hover:scale-[1.02] flex items-center justify-center gap-3">
              <div class="absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"></div>
              <i data-lucide="heart-handshake" class="w-6 h-6 relative z-10"></i>
              <span class="relative z-10">Register as Donor</span>
            </button>
          </div>
        </form>

        <!-- Additional Info -->
        <div class="mt-8 p-5 bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 rounded-2xl border border-blue-200 dark:border-blue-800">
          <div class="flex items-start gap-3">
            <i data-lucide="shield-check" class="w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"></i>
            <div>
              <h4 class="font-bold text-sm text-gray-900 dark:text-white mb-1">Your Information is Safe</h4>
              <p class="text-xs text-gray-600 dark:text-gray-400 leading-relaxed">
                We protect your personal information with industry-standard security measures. Your data will only be used to connect you with those in need of donations.
              </p>
            </div>
          </div>
        </div>

        <!-- Already Registered -->
        <div class="mt-6 text-center">
          <p class="text-sm text-gray-600 dark:text-gray-400">
            Already registered? 
            <a href="/signin" class="text-rose-600 dark:text-rose-400 font-bold hover:underline">Sign in here</a>
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- Benefits Section -->
  <div class="w-full max-w-2xl mt-8 grid grid-cols-1 md:grid-cols-3 gap-4 animate-slide-up" style="animation-delay: 0.2s;">
    <div class="p-5 bg-white dark:bg-slate-900 rounded-2xl border border-gray-200 dark:border-slate-800 shadow-lg hover:shadow-xl transition-all hover:-translate-y-1">
      <div class="w-12 h-12 bg-gradient-to-br from-green-100 to-emerald-100 dark:from-green-900/30 dark:to-emerald-900/30 rounded-xl flex items-center justify-center mb-3">
        <i data-lucide="heart-pulse" class="w-6 h-6 text-green-600 dark:text-green-400"></i>
      </div>
      <h3 class="font-bold text-gray-900 dark:text-white mb-1">Save Lives</h3>
      <p class="text-xs text-gray-600 dark:text-gray-400">One donation can save up to three lives</p>
    </div>

    <div class="p-5 bg-white dark:bg-slate-900 rounded-2xl border border-gray-200 dark:border-slate-800 shadow-lg hover:shadow-xl transition-all hover:-translate-y-1">
      <div class="w-12 h-12 bg-gradient-to-br from-blue-100 to-cyan-100 dark:from-blue-900/30 dark:to-cyan-900/30 rounded-xl flex items-center justify-center mb-3">
        <i data-lucide="bell-ring" class="w-6 h-6 text-blue-600 dark:text-blue-400"></i>
      </div>
      <h3 class="font-bold text-gray-900 dark:text-white mb-1">Get Notified</h3>
      <p class="text-xs text-gray-600 dark:text-gray-400">Receive alerts for nearby donation requests</p>
    </div>

    <div class="p-5 bg-white dark:bg-slate-900 rounded-2xl border border-gray-200 dark:border-slate-800 shadow-lg hover:shadow-xl transition-all hover:-translate-y-1">
      <div class="w-12 h-12 bg-gradient-to-br from-purple-100 to-indigo-100 dark:from-purple-900/30 dark:to-indigo-900/30 rounded-xl flex items-center justify-center mb-3">
        <i data-lucide="award" class="w-6 h-6 text-purple-600 dark:text-purple-400"></i>
      </div>
      <h3 class="font-bold text-gray-900 dark:text-white mb-1">Track Impact</h3>
      <p class="text-xs text-gray-600 dark:text-gray-400">Monitor your donation history and impact</p>
    </div>
  </div>
</div>

<!-- AlpineJS for auto-dismiss -->
<script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

<script>
  // Initialize Lucide icons after page load
  document.addEventListener('DOMContentLoaded', function() {
    if (typeof lucide !== 'undefined') {
      lucide.createIcons();
    }
  });
</script>
{% endblock %}