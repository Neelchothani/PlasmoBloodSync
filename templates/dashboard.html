{% extends "base.html" %}
{% block title %}User Dashboard | PlasmoBlood Sync{% endblock %}

{% block content %}

<div class="min-h-[80vh] px-6 py-10 flex flex-col items-center">
  <div class="w-full max-w-7xl">

    <!-- Greeting -->
    <div class="text-center mb-12">
      <div class="inline-block px-6 py-4 rounded-2xl bg-[#1f2737] border border-gray-700 shadow shadow-yellow-500/10">
        <h1 class="text-2xl font-semibold text-yellow-300 mb-2">
          ðŸ‘‹ Welcome back, {{ session.username|capitalize }}!
        </h1>
        <p class="text-sm text-gray-400">Your personal dashboard for blood & plasma donation.</p>
      </div>
    </div>

    <!-- Info Cards Grid -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">

      <!-- Donations Card -->
      <div class="bg-[#1a1c2c]/80 border border-gray-700 rounded-2xl p-6 shadow-lg transition transform hover:-translate-y-1 hover:shadow-red-500/30 backdrop-blur-md">
        <div class="flex items-center justify-between mb-4">
          <h2 class="text-2xl font-bold text-white">ðŸ©¸ Your Donations</h2>
          <span class="text-xs font-medium bg-yellow-500/10 text-yellow-400 px-3 py-1 rounded-full">History</span>
        </div>
        <p class="text-gray-400 text-sm leading-relaxed">Review your recent donation activities, dates and types.</p>
        <a href="/donate" class="inline-block mt-4 text-red-400 hover:text-red-300 text-sm font-semibold">+ Donate Again</a>
      </div>

      <!-- Eligibility Card -->
      <div class="bg-[#1a1c2c]/80 border border-gray-700 rounded-2xl p-6 shadow-lg transition transform hover:-translate-y-1 hover:shadow-green-500/30 backdrop-blur-md">
        <div class="flex items-center justify-between mb-4">
          <h2 class="text-2xl font-bold text-white">âœ… Eligibility</h2>
          <span class="text-xs font-medium bg-green-500/10 text-green-400 px-3 py-1 rounded-full">AI-Based</span>
        </div>
        <p class="text-gray-400 text-sm leading-relaxed">AI checks your uploaded reports and tells if you're eligible to donate.</p>
        <a href="/eligibility" class="inline-block mt-4 text-green-400 hover:text-green-300 text-sm font-semibold">+ Check Now</a>
      </div>
    </div>

    <!-- Donation Analytics Chart -->
    <div class="mt-16 w-full">
      <div class="bg-[#1a1c2c] border border-gray-700 rounded-2xl p-8 shadow-lg shadow-purple-500/10">
        <h3 class="text-xl font-semibold text-white mb-4 text-center">ðŸ“Š Donation Analytics</h3>
        <canvas id="bloodGroupChart" height="120"></canvas>
      </div>
    </div>

    <!-- CTA Section -->
    <div class="mt-16 text-center">
      <div class="inline-block w-full max-w-2xl bg-[#1a1c2c] border border-gray-700 rounded-2xl shadow-lg shadow-red-500/10 px-8 py-10">
        <h3 class="text-2xl font-bold text-white mb-2">ðŸ’‰ Ready to make your next donation?</h3>
        <p class="text-gray-400 mb-6">Give the gift of life â€” it only takes a minute to make a difference.</p>
        <a href="/donate"
           class="inline-block px-8 py-4 rounded-xl bg-gradient-to-tr from-red-600 to-red-400 hover:from-red-500 hover:to-red-300 text-white font-semibold text-lg transition-all shadow-lg shadow-red-500/30">
          ðŸš‘ Donate Now
        </a>
      </div>
    </div>

  </div>
</div>

<!-- Chart.js Script -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const ctx = document.getElementById('bloodGroupChart').getContext('2d');
  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: ['A+', 'A-', 'B+', 'B-', 'O+', 'O-', 'AB+', 'AB-'],
      datasets: [{
        label: 'Units Donated',
        data: [12, 5, 9, 3, 15, 4, 7, 2],  // Replace with dynamic values if needed
        backgroundColor: [
          '#f87171', '#fbbf24', '#34d399', '#60a5fa',
          '#a78bfa', '#f472b6', '#fb923c', '#38bdf8'
        ],
        borderRadius: 6,
        borderSkipped: false
      }]
    },
    options: {
      responsive: true,
      scales: {
        y: {
          beginAtZero: true,
          ticks: { color: "#9ca3af" },
          grid: { color: "#374151" }
        },
        x: {
          ticks: { color: "#9ca3af" },
          grid: { color: "#374151" }
        }
      },
      plugins: {
        legend: {
          labels: {
            color: "#f3f4f6"
          }
        }
      }
    }
  });
  
</script>
{% endblock %}
